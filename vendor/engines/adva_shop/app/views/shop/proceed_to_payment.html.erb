<%= javascript_include_tag 'checkout' %>

<%= render :partial => 'cart_products' %>

<div style="padding: 20px">
	
	<% form_tag(process_payment_path) do %>
		
		<p>
			<h3>
				Select the Shipping Method:
			</h3>
			<%= select_tag "shipping_method_id", options_for_select(shipping_method_options) %>
		</p>
		
		<h3>
			Select the Payment Method:
		</h3>
	
	
		<div id="checkout_options" style="padding-top: 10px">
			<p>
				<%= radio_button_tag "payment_method", "CreditCardPayment", true, 
					{:onclick => "togglePaymentMethods('credit_card_details', 'paypal_checkout_button', 'bank_details','submit_icon');"} %>
				<b>Credit Card</b>
			</p>
			<p>
				<%= radio_button_tag "payment_method", "ExternalPayment", false, 
					{:onclick => "togglePaymentMethods('paypal_checkout_button', 'credit_card_details', 'bank_details','submit_icon');"} %>
				<b>Paypal</b>
			</p>
			<p>
				<%= radio_button_tag "payment_method", "BankPayment", false, 
					{:onclick => "togglePaymentMethods('bank_details', 'credit_card_details', 'paypal_checkout_button','submit_icon');"} %>
				<b>Bank</b>
			</p>
		</div>
		
		<div id="credit_card_details">
			<table cellspacing="5">
				<tr>
					<td><b> First Name</b></td>
					<td><%= text_field "credit_card", "first_name" %></td>
				</tr>
				<tr>
					<td><b> Last Name</b></td>
					<td><%= text_field "credit_card", "last_name" %></td>
				</tr>
				<tr>
					<td><b> Card Type</b></td>
					<td><%= select "credit_card", "type", CreditCardPayment.acceptable_credit_cards.collect{|type| [type.humanize, type]} %></td>
				</tr>
		
				<tr>
					<td><b>Credit Card Number</b></td>
					<td><%= text_field "credit_card", "number" %></td>
				</tr>
				<tr>
					<td><b>Expiration Date</b></td>
					<td><%=month_select_for("credit_card") %>  <%=year_select_for("credit_card") %></td>
				</tr>
				<tr>
					<td><b>Card Verification Value</b></td>
					<td><%= text_field "credit_card", "verification_value" %></td>
				</tr>
			</table>
		</div>
				
		
		<div id="bank_details" style="display: none">
			<p>
				<h3>Please deposit the payment to the following bank account:</h3>
			</p>
			<p style="padding: 10px">
				<b>Bank:</b> <%= @section.bank_payment.bank_name %><br />
				<b>Account Number:</b> <%= @section.bank_payment.account_number %><br />
				<b>Payee Name:</b> <%= @section.bank_payment.payee_name %><br />
				<b>Note:</b> <%= @section.bank_payment.other_details %>
			</p>
		</div>
		
		<div id= "submit_icon">
			<p><%= submit_tag "Pay Order" %></p>
		</div>
	<% end %>
	<div id="paypal_checkout_button" style="display: none">
			<p>
		 		<%= link_to image_tag('https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif'), process_payment_path %>
			</p>
	</div>
</div>